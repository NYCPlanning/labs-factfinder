{{#if this.visible}}
  {{#each this.config.layers as |layerConfig|}}
    {{map.layer
      layer=layerConfig.layer
      didUpdateLayers=this.didUpdateLayers
      before=this.before}}
  {{/each}}
{{/if}}

{{yield
  (hash
    timeline-control=
      (component 'layer-control-timeline' layer=
        (hash
          visible=this.visible
        )
        qps=this.qps
      )

    multi-select-control=
      (component 'layer-multi-select-control' layer=
        (hash
          visible=this.visible
        )
        qps=this.qps
      )

    tooltip=
      (component 'layer-tooltip' layer=
        (hash
          visible=this.visible
        )
      )

    visible=this.visible

    updateSql=(action 'updateSql')

    updatePaintFor=(action 'updatePaintFor')

    isPending=this.configWithTemplate.isPending

    toggleVisibility=(action 'toggleVisibility')
  )
}}
