{{#if glSupported}}
  {{#if (and map (is-fulfilled cartoSourcePromises))}}
    {{yield (hash
      call=(component 'mapbox-gl-call' obj=map)
      control=(component 'mapbox-gl-control' map=map)
      layer=(component 'mapbox-gl-layer' map=map)
      marker=(component 'mapbox-gl-marker' map=map)
      on=(component 'mapbox-gl-on' eventSource=map)
      popup=(component 'mapbox-gl-popup' map=map)
      source=(component 'mapbox-gl-source' map=map)
      layer-group=(component 'layer-group'
        parentComponent=this
        map=(hash
          layer=(component 'mapbox-gl-layer' map=map)
          source=(component 'mapbox-gl-source' map=map)
        )
      )
      interactive-layers=(
        component 'interactive-layers'
          map=(hash
            layer-group=(component 'layer-group'
              map=(hash
                layer=(component 'mapbox-gl-layer' map=map)
                source=(component 'mapbox-gl-source' map=map)
              )
            )
          )
        )
      )
    }}
  {{/if}}
{{else}}
  {{yield to='inverse'}}
{{/if}}
